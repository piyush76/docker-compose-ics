---

connector:
  name: ICS Service Target Infrastructure
  identifier: ics_service_target_infrastructure
  description: SSH connector for ICS service deployment hosts
  orgIdentifier: default
  projectIdentifier: ics_service_project
  type: SshWinRmAws
  spec:
    connectionType: Ssh
    sshSpec:
      auth:
        type: SSH
        spec:
          credentialType: KeyReference
          keyReference: <+secrets.getValue("ssh_private_key")>
      hostConnectionType: HostName
    executeOnDelegate: false
  tags:
    purpose: deployment
    service: ics-service
---
connector:
  name: Docker Registry Connector
  identifier: docker_registry_connector
  description: Connector for accessing container images
  orgIdentifier: default
  projectIdentifier: ics_service_project
  type: DockerRegistry
  spec:
    dockerRegistryUrl: https://incora.azurecr.io
    providerType: DockerHub
    auth:
      type: UsernamePassword
      spec:
        username: <+secrets.getValue("docker_registry_username")>
        passwordRef: <+secrets.getValue("docker_registry_password")>
    executeOnDelegate: false
  tags:
    purpose: image-access
    registry: azure-container-registry
---
connector:
  name: GitHub Source Connector
  identifier: github_connector
  description: GitHub connector for source code access
  orgIdentifier: default
  projectIdentifier: ics_service_project
  type: Github
  spec:
    url: https://github.com/piyush76/docker-compose-ics
    validationRepo: docker-compose-ics
    authentication:
      type: Http
      spec:
        type: UsernameToken
        spec:
          username: piyush76
          tokenRef: <+secrets.getValue("github_personal_access_token")>
    apiAccess:
      type: Token
      spec:
        tokenRef: <+secrets.getValue("github_personal_access_token")>
    executeOnDelegate: false
    type: Repo
  tags:
    purpose: source-code
    platform: github
